---
layout: post
title: Securing Kali Against Hacking
date: '2020-08-19T12:01:01+00:00'
tags:
- pentesting
- hacking
- linux
- linux tutorial
- guide
tumblr_url: https://undedinside.tumblr.com/post/626894162165432320/securing-kali-against-hacking
---
<p>Note: This will not make you immune to being hacked, but it will help.</p><p>Last time I taught how to create a Kali virtual machine for VMware and for VirtualBox, but now you need to protect yourself.</p><p>The first thing you should do is change the default password. Default passwords are how a lot of machines get hacked. In fact, in 2012 a botnet called <a href="https://en.wikipedia.org/wiki/Carna_botnet">Carna</a> hacked 420,000 machines using default login credentials or none at all.</p><p>When we use the ‘passwd’ command, we will be prompted to enter the current password (’kali’ by default), and then we will be asked to enter a new password. Make this a strong one, but also one you can remember.</p><figure data-orig-width="650" data-orig-height="513" class="tmblr-full"><img src="https://64.media.tumblr.com/c4277de75a349c3e78c6b27f42082c8f/4076498177cbc17a-20/s540x810/d907e6927540e1d47c24693fb686cbcbad86b91d.png" alt="image" data-orig-width="650" data-orig-height="513"/></figure><p>(note: It won’t show your password when you type, for security reasons)</p><p>The next thing to do is to update the software. Another one of the main ways machines get hacked is by outdated software.</p><p>Lots of software can be installed on Linux with the command ‘apt’/’apt-get’. We will be using ‘apt-get update’ to update apt. Updating apt allows us to update software later. When you run this command however, you will get an error.</p><figure data-orig-width="650" data-orig-height="513" class="tmblr-full"><img src="https://64.media.tumblr.com/058a032c2f523b0cba0657b1ac977664/4076498177cbc17a-7b/s540x810/b52f2f522d913024121f2e5fb985ce506c22beae.png" alt="image" data-orig-width="650" data-orig-height="513"/></figure><p>This is because you don’t have the permissions to run ‘apt-get’. This is when a new command comes into play. This command is called ‘sudo’, which stands for ‘<b>su</b>peruser <b>do</b>’ or ‘<b>su</b>bstitute user <b>do</b>’. The command ‘sudo’ allows us to run commands which a usual user cannot. We do this by adding ‘sudo’ before the command we need to run.</p><figure data-orig-width="650" data-orig-height="513" class="tmblr-full"><img src="https://64.media.tumblr.com/969cf8262a5e233d3c1e6652b9064270/4076498177cbc17a-93/s540x810/9084dc3173ce670751fc21a18231b47f8b3cb6ee.png" alt="image" data-orig-width="650" data-orig-height="513"/></figure><p>The first time you run ‘sudo’ you will be given this notification which warns you that as a superuser you can do things which could potentially damage your computer or invade the privacy of others, and that you should be careful of what you do with it. Enter your password and the update will start.</p><figure data-orig-width="650" data-orig-height="513" class="tmblr-full"><img src="https://64.media.tumblr.com/3d4424ce30a01e6f3011c9d436a5f24a/4076498177cbc17a-1c/s540x810/da8ccb8c69369801e7f3ba6d839f67d776f1726b.png" alt="image" data-orig-width="650" data-orig-height="513"/></figure><p>Running ‘sudo apt-get upgrade’ then updates all of the software we have installed. If you get a prompt like the following, you just have to press ‘y’ to confirm you want to download all the updates.</p><figure data-orig-width="650" data-orig-height="513" class="tmblr-full"><img src="https://64.media.tumblr.com/4d6d166f2c7be826e533347e8d718461/4076498177cbc17a-28/s540x810/165ce96ced5c9d1c8336c0a2a97ff58ceed51fcd.png" alt="image" data-orig-width="650" data-orig-height="513"/></figure><p>If a pop-up like this occurs, just press q to close it</p><figure data-orig-width="650" data-orig-height="513" class="tmblr-full"><img src="https://64.media.tumblr.com/dfd5f29023f68d3a4593ced71ddbd5c1/4076498177cbc17a-87/s540x810/cd16918afedbed30899889f178cdf4f4d81b130e.png" alt="image" data-orig-width="650" data-orig-height="513"/></figure><p>Some more pop-ups then may appear. Just press enter to select the default values.</p><figure data-orig-width="650" data-orig-height="513" class="tmblr-full"><img src="https://64.media.tumblr.com/8266a25932358d547161fb8332730301/4076498177cbc17a-8e/s540x810/a1d383e7b19e6e431643e75ba86f7925c27da9ef.png" alt="image" data-orig-width="650" data-orig-height="513"/></figure><p>Once you finish upgrading, we then run ‘sudo apt-get dist-upgrade’. Although this looks similar to apt-get upgrade’, this removes the outdated software and installs software needed to upgrade others.</p><figure data-orig-width="650" data-orig-height="513" class="tmblr-full"><img src="https://64.media.tumblr.com/6bf922b6a955037466f835fce9c63e22/4076498177cbc17a-5d/s540x810/f764742e482af39469d338924e8825c972d0bd02.png" alt="image" data-orig-width="650" data-orig-height="513"/></figure><p>The next thing we need to do is get new SSH keys. SSH is a tool for remotely connecting to another computer (a guide on this later) and SSH keys allow you to avoid needing to enter a password every time you connect to a familiar machine.The first step to changing these is to cd to /etc/ssh:</p><figure data-orig-width="650" data-orig-height="513" class="tmblr-full"><img src="https://64.media.tumblr.com/281fd80d823092d65329dbdd762ca165/4076498177cbc17a-94/s540x810/9837c3a354fea6af7cf5e13bb8eb38d6743d787e.png" alt="image" data-orig-width="650" data-orig-height="513"/></figure><p>Now let’s make a new directory called old_keys with mkdir, and move all of the old keys to do it. We do this with the command ‘mkdir old_keys’ to create a new directory, and then ‘mv ssh_host_* old_keys/’ to move all files beginning with ‘ssh_host_’ to the new directory.</p><figure data-orig-width="650" data-orig-height="513" class="tmblr-full"><img src="https://64.media.tumblr.com/a3b18096168930e0b8b16b198510f51f/4076498177cbc17a-a0/s540x810/dfa4c5c57f9495e665f30373c37985931c2670ec.png" alt="image" data-orig-width="650" data-orig-height="513"/></figure><p>now we generate new keys with ‘dpkg-reconfigure openssh-server’</p><figure data-orig-width="650" data-orig-height="513" class="tmblr-full"><img src="https://64.media.tumblr.com/58be924d3d1de731c59b93bf1ad7b164/4076498177cbc17a-cf/s540x810/11e261b8a5d72569db038ffbd3ad3b86991ff147.png" alt="image" data-orig-width="650" data-orig-height="513"/></figure><p>[optional] You can check that you have created new keys by running the following commands. This shows you a unique hash of each file and allows you to see that the files are different.</p><figure data-orig-width="650" data-orig-height="513" class="tmblr-full"><img src="https://64.media.tumblr.com/8dd9195a9680c5e02ddcda79df8066a6/4076498177cbc17a-27/s540x810/ef886d462b0749ae948af081d261cde81f0cf911.png" alt="image" data-orig-width="650" data-orig-height="513"/></figure><p>You are now more protected against some of the main ways of being hacked. After all, you want to be the hacker, not the hacked.<br/></p>
